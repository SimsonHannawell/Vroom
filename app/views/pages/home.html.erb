<%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" %>
<%= javascript_include_tag "https://cdn.jsdelivr.net/npm/flatpickr" %>
<%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" %>
<%= javascript_include_tag "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" %>

<!-- Navbar -->
<div class="navbar d-flex justify-content-between align-items-center px-3 py-2 border-bottom bg-white">
  <div class="logo-and-search d-flex align-items-center gap-3">
    <%= image_tag "vroom logo.jpg", class: "logo" %>

    <div class="search-bar d-flex gap-2">
      <input type="text" class="form-control" placeholder="Where">
      <input type="text" id="check-in" class="form-control" placeholder="Check in">
      <input type="text" id="check-out" class="form-control" placeholder="Check out">

      <!-- Time Dropdown -->
      <div class="dropdown">
        <button class="btn btn-outline-secondary dropdown-toggle form-control text-start" type="button" id="timeDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          Select Time
        </button>
        <ul class="dropdown-menu" aria-labelledby="timeDropdown">
          <% ["08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00"].each do |time| %>
            <li><a class="dropdown-item" href="#" onclick="selectTime('<%= time %>')"><%= time %></a></li>
          <% end %>
        </ul>
        <input type="hidden" id="selected-time" name="time">
      </div>
    </div>
  </div>

  <div class="top-buttons d-flex gap-2">
    <%= link_to "Manage Booking", bookings_path, class: "btn btn-outline-dark" %>
    <%= link_to "Make money $", bookings_path, class: "btn btn-outline-dark" %>
    <%= link_to "Sign in", "#", class: "btn btn-outline-dark" %>
  </div>
</div>

<div class="my-3"></div>

<!-- Banner carousel -->
<div id="bannerCarousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <%= image_tag "Picture1.png", class: "d-block w-100", alt: "Slide 1" %>
    </div>
    <div class="carousel-item">
      <%= image_tag "Picture2.jpg", class: "d-block w-100", alt: "Slide 2" %>
    </div>
    <div class="carousel-item">
      <%= image_tag "Picture3.png", class: "d-block w-100", alt: "Slide 3" %>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- Card section -->
<div class="container w-75 p-3 mt-5 mb-5">
  <h1 class="mb-4 text-center"> Vroom! Explore Our Cars</h1>

  <div class="card-grid">
    <% @cars.each do |car| %>
      <%= link_to car_path(car), class: "card-link-wrapper" do %>
        <div class="card">
          <div class="card-top">
            <h2><strong><%= "#{car.make} #{car.model}" %></strong></h2>
          </div>
          <div class="card-image">
            <%= image_tag("bmw_car.jpg", alt: "#{car.make} image") %>
          </div>
          <div class="card-bottom">
            Year: <%= car.year %>, Fuel: <%= car.fuel_type %>, Transmission: <%= car.transmission %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    flatpickr("#check-in", { dateFormat: "Y-m-d" });
    flatpickr("#check-out", { dateFormat: "Y-m-d" });
  });

  function selectTime(time) {
    document.getElementById("timeDropdown").textContent = time;
    document.getElementById("selected-time").value = time;
  }
</script>
