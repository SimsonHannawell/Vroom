<h1>My Bookings</h1>

<!-- Incoming Bookings -->
<section>
  <h2>Incoming Bookings</h2>
  <% if @incoming_bookings.any? %>
    <div class="booking-grid">
      <% @incoming_bookings.each do |booking| %>
        <div class="booking-card">
          <div class="booking-image">
            <%= image_tag(booking.car.image_url || "placeholder-car.jpg", alt: booking.car.model, class: "car-img") %>
          </div>
          <div class="booking-info">
            <p><strong>User:</strong> <%= booking.user.email %></p>
            <p><strong>Car:</strong> <%= booking.car.make %> <%= booking.car.model %></p>
            <p><strong>Dates:</strong> <%= booking.start_date.strftime("%d %b %Y") %> - <%= booking.end_date.strftime("%d %b %Y") %></p>
            <p><strong>Price:</strong> $<%= booking.total_price %></p>
          </div>
          <div class="booking-actions">
            <%= button_to "Accept", accept_booking_path(booking), method: :post, class: "btn btn-success" %>
            <%= button_to "Decline", decline_booking_path(booking), method: :post, class: "btn btn-danger" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>No incoming bookings.</p>
  <% end %>
</section>

<!-- Pending Bookings -->
<section>
  <h2>Pending Bookings</h2>
  <% if @pending_bookings.any? %>
    <div class="booking-grid">
      <% @pending_bookings.each do |booking| %>
        <div class="booking-card">
          <div class="booking-image">
            <%= image_tag(booking.car.image_url || "placeholder-car.jpg", alt: booking.car.model, class: "car-img") %>
          </div>
          <div class="booking-info">
            <p><strong>Car:</strong> <%= booking.car.make %> <%= booking.car.model %></p>
            <p><strong>Dates:</strong> <%= booking.start_date.strftime("%d %b %Y") %> - <%= booking.end_date.strftime("%d %b %Y") %></p>
            <p><strong>Status:</strong> Pending</p>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>No pending bookings.</p>
  <% end %>
</section>

<style>
  .booking-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    gap: 1.5rem;
    margin-top: 1rem;
  }

  .booking-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 1rem;
    background: #fff;
    box-shadow: 0 0 8px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .booking-image img.car-img {
    width: 100%;
    height: 160px;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 0.8rem;
  }

  .booking-info p {
    margin: 0.3rem 0;
  }

  .booking-actions {
    margin-top: 1rem;
    display: flex;
    gap: 1rem;
  }

  .btn {
    padding: 0.4rem 1rem;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
  }

  .btn-success {
    background-color: #28a745;
    color: white;
  }

  .btn-danger {
    background-color: #dc3545;
    color: white;
  }

  .btn-success:hover {
    background-color: #218838;
  }

  .btn-danger:hover {
    background-color: #c82333;
  }
</style>
